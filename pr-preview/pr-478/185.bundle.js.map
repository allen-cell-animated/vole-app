{"version":3,"file":"185.bundle.js","mappings":"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","sources":["webpack://@aics/vole-app/./website/components/Modals/ShareModal.tsx","webpack://@aics/vole-app/./website/components/AppWrapper.tsx"],"sourcesContent":["import type { View3d } from \"@aics/vole-core\";\nimport { ShareAltOutlined } from \"@ant-design/icons\";\nimport { Button, Input, Modal, notification } from \"antd\";\nimport React, { useRef, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { useShallow } from \"zustand/shallow\";\n\nimport type { MultisceneUrls } from \"../../../src/aics-image-viewer/components/App/types\";\nimport {\n  ENCODED_COLON_REGEX,\n  ENCODED_COMMA_REGEX,\n  serializeViewerUrlParams,\n} from \"../../../src/aics-image-viewer/shared/utils/urlParsing\";\nimport { selectViewerSettings, useViewerState, type ViewerStore } from \"../../../src/aics-image-viewer/state/store\";\nimport type { AppDataProps } from \"../../types\";\nimport { FlexRow } from \"../LandingPage/utils\";\n\ntype ShareModalProps = {\n  appProps: AppDataProps;\n  // Used to retrieve the current camera position information\n  view3dRef?: React.RefObject<View3d | null>;\n};\n\nconst ModalContainer = styled.div``;\n\nconst ShareModal: React.FC<ShareModalProps> = (props: ShareModalProps) => {\n  const viewerSettings = useViewerState(useShallow(selectViewerSettings));\n  const channelSettings = useViewerState(useShallow((store: ViewerStore) => store.channelSettings));\n\n  const [showModal, setShowModal] = useState(false);\n  const modalContainerRef = useRef<HTMLDivElement>(null);\n\n  const [notificationApi, notificationContextHolder] = notification.useNotification({\n    getContainer: modalContainerRef.current ? () => modalContainerRef.current! : undefined,\n    placement: \"bottomLeft\",\n    duration: 2,\n  });\n\n  // location.pathname will include up to `.../viewer`\n  const baseUrl = location.protocol + \"//\" + location.host + location.pathname;\n  const paramProps = {\n    ...viewerSettings,\n    channelSettings,\n    cameraState: props.view3dRef?.current?.getCameraState(),\n  };\n\n  const urlParams: string[] = [];\n  const { imageUrl } = props.appProps;\n\n  if (imageUrl) {\n    const urls = (imageUrl as MultisceneUrls).scenes ?? [imageUrl];\n    const serializedUrl = urls\n      .map((scene) => {\n        if (Array.isArray(scene)) {\n          return scene.map((url) => encodeURIComponent(url)).join(\",\");\n        } else {\n          return encodeURIComponent(scene);\n        }\n      })\n      .join(\"+\");\n\n    urlParams.push(`url=${serializedUrl}`);\n  }\n\n  let serializedViewerParams = new URLSearchParams(serializeViewerUrlParams(paramProps) as Record<string, string>);\n  if (serializedViewerParams.size > 0) {\n    // Decode specifically colons and commas for better readability + decreased char count\n    let viewerParamString = serializedViewerParams\n      .toString()\n      .replace(ENCODED_COLON_REGEX, \":\")\n      .replace(ENCODED_COMMA_REGEX, \",\");\n    urlParams.push(viewerParamString);\n  }\n\n  const shareUrl = urlParams.length > 0 ? `${baseUrl}?${urlParams.join(\"&\")}` : baseUrl;\n\n  const onClickCopy = (): void => {\n    navigator.clipboard.writeText(shareUrl);\n    notificationApi.success({\n      message: \"URL copied\",\n    });\n  };\n\n  return (\n    <ModalContainer ref={modalContainerRef}>\n      {notificationContextHolder}\n\n      <Button type=\"link\" onClick={() => setShowModal(!showModal)}>\n        <ShareAltOutlined />\n        Share\n      </Button>\n      <Modal\n        open={showModal}\n        title={\"Share URL\"}\n        onCancel={() => {\n          setShowModal(false);\n        }}\n        getContainer={modalContainerRef.current || undefined}\n        footer={\n          <Button type=\"default\" onClick={() => setShowModal(false)}>\n            Close\n          </Button>\n        }\n        destroyOnClose={true}\n      >\n        <FlexRow $gap={8} style={{ marginTop: \"12px\" }}>\n          <Input value={shareUrl} readOnly={true}></Input>\n          <Button type=\"primary\" onClick={onClickCopy}>\n            Copy URL\n          </Button>\n        </FlexRow>\n      </Modal>\n    </ModalContainer>\n  );\n};\n\nexport default ShareModal;\n","import type { View3d } from \"@aics/vole-core\";\nimport type { FirebaseFirestore } from \"@firebase/firestore-types\";\nimport { isEqual } from \"lodash\";\nimport React, { type ReactElement, useCallback, useEffect, useState } from \"react\";\nimport { useLocation, useNavigate, useSearchParams } from \"react-router-dom\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport {\n  addViewerParamsFromMessage,\n  ImageViewerApp,\n  parseViewerUrlParams,\n  writeMetadata,\n  writeScenes,\n} from \"../../src\";\nimport { getDefaultViewerChannelSettings } from \"../../src/aics-image-viewer/shared/constants\";\nimport { select, useViewerState } from \"../../src/aics-image-viewer/state/store\";\nimport type { ViewerState } from \"../../src/aics-image-viewer/state/types\";\nimport type { AppDataProps } from \"../types\";\nimport { encodeImageUrlProp } from \"../utils/urls\";\nimport { FlexRowAlignCenter } from \"./LandingPage/utils\";\n\nimport { type ErrorAlertDescription, useErrorAlert } from \"../../src/aics-image-viewer/components/ErrorAlert\";\nimport Header, { HEADER_HEIGHT_PX } from \"./Header\";\nimport HelpDropdown from \"./HelpDropdown\";\nimport LoadModal from \"./Modals/LoadModal\";\nimport ShareModal from \"./Modals/ShareModal\";\n\nconst MSG_ORIGIN_PARAM = \"msgorigin\";\nconst COLLECTION_ID_PARAM = \"collectionid\";\n\nconst DEFAULT_APP_PROPS: AppDataProps = {\n  imageUrl: \"\",\n  cellId: \"\",\n  imageDownloadHref: \"\",\n  parentImageDownloadHref: \"\",\n  viewerChannelSettings: getDefaultViewerChannelSettings(),\n};\n\ntype AppWrapperProps = {\n  firestore?: FirebaseFirestore;\n};\n\nconst TOO_MANY_SCENES_ERROR: ErrorAlertDescription = {\n  title: \"Too many scenes to fit in local storage\",\n  description: (\n    <>\n      An external application sent more image URLs than can fit in your browser&apos;s local storage. Reloading the page\n      or returning later may cause your session to be lost.\n    </>\n  ),\n};\n\nconst TOO_MUCH_METADATA_ERROR: ErrorAlertDescription = {\n  title: \"Received more metadata than can fit in local storage\",\n  description: (\n    <>\n      An external application sent more image metadata than can fit in your browser&apos;s local storage. Reloading the\n      page or returning later may cause some data to be lost.\n    </>\n  ),\n};\n\n/**\n * Wrapper around the main ImageViewer component. Handles the collection of parameters from the\n * URL and location state (from routing) to pass to the viewer.\n */\nexport default function AppWrapper(props: AppWrapperProps): ReactElement {\n  const location = useLocation();\n  const navigation = useNavigate();\n\n  const view3dRef = React.useRef<View3d | null>(null);\n  const prevViewerSettingsRef = React.useRef<Partial<ViewerState> | undefined>(undefined);\n  const mergeViewerSettings = useViewerState(select(\"mergeViewerSettings\"));\n  const [viewerProps, setViewerProps] = useState<AppDataProps | null>(null);\n  const [imageTitle, setImageTitle] = useState<string | undefined>(undefined);\n  const [searchParams, setSearchParams] = useSearchParams();\n  const [errorAlert, showErrorAlert] = useErrorAlert();\n\n  useEffect(() => {\n    // On load, fetch parameters from the URL and location state, then merge.\n    const locationArgs = location.state as AppDataProps;\n    let ignore = false;\n\n    const getViewerStateFromSearchParams = async (): Promise<void> => {\n      try {\n        const urlArgs = await parseViewerUrlParams(window.location.search, props.firestore);\n        if (ignore) return;\n        setViewerProps({ ...DEFAULT_APP_PROPS, ...urlArgs.args, ...locationArgs });\n\n        const viewerSettings = { ...urlArgs.viewerSettings, ...locationArgs?.viewerSettings };\n        if (viewerSettings && !isEqual(viewerSettings, prevViewerSettingsRef.current)) {\n          mergeViewerSettings(viewerSettings);\n          prevViewerSettingsRef.current = viewerSettings;\n        }\n      } catch (reason) {\n        if (ignore) return;\n        showErrorAlert(\"Failed to parse URL parameters: \" + reason);\n        setViewerProps({ ...DEFAULT_APP_PROPS, ...locationArgs });\n      }\n    };\n\n    // Handle the opening window wanting to send more data via a message\n    const msgorigin = searchParams.get(MSG_ORIGIN_PARAM);\n\n    if (msgorigin !== null) {\n      const receiveMessage = (event: MessageEvent): void => {\n        if (event.origin !== msgorigin) {\n          return;\n        }\n\n        const metaFit = event.data.meta === undefined || writeMetadata(event.data.meta);\n\n        let scenesFit = true;\n        if (event.data.scenes !== undefined) {\n          const collectionid = uuidv4();\n          scenesFit = writeScenes(collectionid, encodeImageUrlProp(event.data));\n          searchParams.set(COLLECTION_ID_PARAM, collectionid);\n        }\n\n        if (!scenesFit) {\n          showErrorAlert(TOO_MANY_SCENES_ERROR);\n        } else if (!metaFit) {\n          showErrorAlert(TOO_MUCH_METADATA_ERROR);\n        }\n\n        if (event.data.sceneIndex !== undefined) {\n          mergeViewerSettings({ scene: event.data.sceneIndex });\n          searchParams.set(\"scene\", event.data.sceneIndex);\n        }\n\n        setViewerProps((currentProps) => {\n          if (currentProps === null) {\n            return null;\n          }\n          return addViewerParamsFromMessage(currentProps, event.data);\n        });\n\n        searchParams.delete(MSG_ORIGIN_PARAM);\n        setSearchParams(searchParams, { replace: true });\n\n        window.removeEventListener(\"message\", receiveMessage);\n      };\n\n      window.addEventListener(\"message\", receiveMessage);\n      window.setTimeout(() => window.removeEventListener(\"message\", receiveMessage), 60000);\n      // Sending a message back lets the opening window know we're ready to receive more data\n      const msg = {\n        appInfo: { name: \"Vol-E\", version: VOLEAPP_VERSION, coreVersion: VOLECORE_VERSION },\n      };\n      (window.opener as Window | null)?.postMessage(msg, msgorigin);\n    }\n\n    getViewerStateFromSearchParams();\n    return () => {\n      ignore = true;\n    };\n  }, [location.state, searchParams, setSearchParams, mergeViewerSettings, showErrorAlert, props.firestore]);\n\n  // TODO: Disabled for now, since it only makes sense for Zarr/OME-tiff URLs. Checking for\n  // validity may be more complex. (Also, we could add a callback to `ImageViewerApp` for successful\n  // loading and only save the URL then.)\n  //\n  // Save recent zarr data urls\n  // useEffect(() => {\n  //   if (typeof viewerArgs.imageUrl === \"string\" && isValidZarrUrl(viewerArgs.imageUrl)) {\n  //     // TODO: Handle case where there are multiple URLs?\n  //     // TODO: Save ALL AppProps instead of only the URL? Ignore/handle rawData?\n  //     addRecentDataUrl({ url: viewerArgs.imageUrl as string, label: viewerArgs.imageUrl as string });\n  //   }\n  // }, [viewerArgs]);\n\n  const onImageTitleChange = useCallback(\n    (title: string | undefined) => {\n      if (!searchParams.get(\"hideTitle\")) {\n        setImageTitle(title);\n        document.title = title ? `Vol-E â€” ${title}` : \"Vol-E\";\n      }\n    },\n    [setImageTitle, searchParams]\n  );\n\n  const onLoad = (appProps: AppDataProps): void => {\n    // Force a page reload when loading new data. This prevents a bug where a desync in the number\n    // of channels in the viewer can cause a crash. The root cause is React immediately forcing a\n    // re-render every time `setState` is called in an async function.\n    navigation(`/viewer?url=${encodeImageUrlProp(appProps.imageUrl)}`, {\n      state: appProps,\n    });\n    navigation(0);\n  };\n\n  return (\n    <div>\n      {errorAlert}\n      <Header title={imageTitle} noNavigate>\n        <FlexRowAlignCenter $gap={12}>\n          <FlexRowAlignCenter $gap={2}>\n            <LoadModal onLoad={onLoad} />\n            {viewerProps && <ShareModal appProps={viewerProps} view3dRef={view3dRef} />}\n          </FlexRowAlignCenter>\n          <HelpDropdown />\n        </FlexRowAlignCenter>\n      </Header>\n      {viewerProps && (\n        <ImageViewerApp\n          {...viewerProps}\n          appHeight={`calc(100vh - ${HEADER_HEIGHT_PX}px)`}\n          canvasMargin=\"0 0 0 0\"\n          view3dRef={view3dRef}\n          showError={showErrorAlert}\n          onImageTitleChange={onImageTitleChange}\n        />\n      )}\n    </div>\n  );\n}\n"],"names":["ModalContainer","styled","div","_templateObject","props","_props$view3dRef","viewerSettings","useViewerState","useShallow","selectViewerSettings","channelSettings","store","_useState2","_slicedToArray","useState","showModal","setShowModal","modalContainerRef","useRef","_notification$useNoti2","notification","useNotification","getContainer","current","undefined","placement","duration","notificationApi","notificationContextHolder","baseUrl","location","protocol","host","pathname","paramProps","_objectSpread","cameraState","view3dRef","getCameraState","urlParams","imageUrl","appProps","_scenes","serializedUrl","scenes","map","scene","Array","isArray","url","encodeURIComponent","join","push","concat","serializedViewerParams","URLSearchParams","serializeViewerUrlParams","size","viewerParamString","toString","replace","ENCODED_COLON_REGEX","ENCODED_COMMA_REGEX","shareUrl","length","React","ref","Button","type","onClick","ShareAltOutlined","Modal","open","title","onCancel","footer","destroyOnClose","FlexRow","$gap","style","marginTop","Input","value","readOnly","navigator","clipboard","writeText","success","message","e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","l","TypeError","call","done","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_invoke","enumerable","configurable","writable","_OverloadYield","k","ownKeys","keys","getOwnPropertySymbols","filter","getOwnPropertyDescriptor","apply","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","_typeof","toPrimitive","String","_toPrimitive","_toPropertyKey","asyncGeneratorStep","Promise","resolve","then","_arrayWithHoles","next","_iterableToArrayLimit","_arrayLikeToArray","slice","constructor","name","from","test","_unsupportedIterableToArray","_nonIterableRest","MSG_ORIGIN_PARAM","DEFAULT_APP_PROPS","cellId","imageDownloadHref","parentImageDownloadHref","viewerChannelSettings","getDefaultViewerChannelSettings","TOO_MANY_SCENES_ERROR","description","TOO_MUCH_METADATA_ERROR","AppWrapper","useLocation","navigation","useNavigate","prevViewerSettingsRef","mergeViewerSettings","select","viewerProps","setViewerProps","_useState4","imageTitle","setImageTitle","_useSearchParams2","useSearchParams","searchParams","setSearchParams","_useErrorAlert2","useErrorAlert","errorAlert","showErrorAlert","useEffect","locationArgs","state","ignore","getViewerStateFromSearchParams","_ref","_regeneratorRuntime","mark","_callee","urlArgs","wrap","_context","prev","parseViewerUrlParams","window","search","firestore","sent","abrupt","args","isEqual","t0","stop","_next","_throw","msgorigin","get","_window$opener","receiveMessage","event","origin","metaFit","data","meta","writeMetadata","scenesFit","collectionid","uuidv4","writeScenes","encodeImageUrlProp","set","sceneIndex","currentProps","addViewerParamsFromMessage","removeEventListener","addEventListener","setTimeout","opener","postMessage","appInfo","version","VOLEAPP_VERSION","coreVersion","VOLECORE_VERSION","onImageTitleChange","useCallback","document","Header","noNavigate","FlexRowAlignCenter","LoadModal","onLoad","ShareModal","HelpDropdown","ImageViewerApp","_extends","appHeight","HEADER_HEIGHT_PX","canvasMargin","showError"],"sourceRoot":""}