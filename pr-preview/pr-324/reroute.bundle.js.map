{"version":3,"file":"reroute.bundle.js","mappings":"mBAAA,IAAMA,EAAoB,QCI1BC,OAAOC,OAAS,WACdC,SAASC,KAAKC,UAAY,EAC5B,EAIA,IAAMC,EAAWL,OAAOK,SAElBC,EDaC,SAAqCC,GAA6C,IAAnCC,EAAwBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACzEG,EAAeL,EAAIM,SAASC,MAAM,KAClCC,EAAWH,EAAaI,MAAM,EAAGR,EAAmB,GAAGS,KAAK,KAI5DC,EAHgBN,EAAaI,MAAMR,EAAmB,GAAGS,KAAK,KAGpCE,QAAQ,KAAMpB,GACxCqB,EAAcb,EAAIc,OAASd,EAAIc,OAAOL,MAAM,GAAGG,QAAQ,KAAMpB,GAAqB,GAEpFO,EAAS,GAAHgB,OAAMf,EAAIgB,QAAMD,OAAGP,EAAQ,OAAAO,OAAMJ,GAI3C,OAHAZ,GAAUc,EAAc,IAAHE,OAAOF,GAAgB,GAC5Cd,GAAUC,EAAIiB,KAEP,IAAIC,IAAInB,EACjB,CC3BeoB,CADK,IAAID,IAAIpB,EAASsB,YACmB,GACxDtB,EAASc,QAAQb,GACjBsB,QAAQC,IAAI,kBAAoBvB,EAAOqB,W","sources":["webpack://@aics/web-3d-viewer/./website/utils/gh_route_utils.ts","webpack://@aics/web-3d-viewer/./public/gh-reroute/index.tsx"],"sourcesContent":["const ESCAPED_AMPERSAND = \"~and~\";\n\n/**\n * Converts the path component of a URL into a query string. Used to redirect the browser\n * for single-page apps when the server is not configured to serve the app for all paths,\n * e.g. GitHub pages.\n *\n * Adapted from https://github.com/rafgraph/spa-github-pages.\n *\n * The original path will be converted into a query string, and the original query string will be\n * escaped and separated with an `&` character.\n *\n * @example\n * ```\n * const url = \"https://www.example.com/one/two?a=b&c=d#qwe\";\n * //                               Original: \"https://www.example.com/one/two?a=b&c=d#qwe\"\n * convertUrlToQueryStringPath(url, 0); // => \"https://www.example.com/?/one/two&a=b~and~c=d#qwe\"\n * convertUrlToQueryStringPath(url, 1); // => \"https://www.example.com/one/?/two&a=b~and~c=d#qwe\"\n * ```\n *\n * @param url - The URL to convert.\n * @param basePathSegments - The number of path segments to keep in the URL. 0 by default.\n *\n * @returns The URL with the path converted to a query string, and the original query string escaped.\n */\nexport function convertUrlToQueryStringPath(url: URL, basePathSegments: number = 0): URL {\n  const pathSegments = url.pathname.split(\"/\");\n  const basePath = pathSegments.slice(0, basePathSegments + 1).join(\"/\");\n  const remainingPath = pathSegments.slice(basePathSegments + 1).join(\"/\");\n  // Remove the \"?\" and replace with an \"&\" to separate the path from the original query string.\n  // Escape existing ampersands with \"~and~\" so \"&\" is preserved as our path/query separator.\n  const queryPath = remainingPath.replace(/&/g, ESCAPED_AMPERSAND);\n  const queryString = url.search ? url.search.slice(1).replace(/&/g, ESCAPED_AMPERSAND) : \"\";\n\n  let newUrl = `${url.origin}${basePath}/?/${queryPath}`;\n  newUrl += queryString ? `&${queryString}` : \"\";\n  newUrl += url.hash;\n\n  return new URL(newUrl);\n}\n\nexport function isQueryStringPath(url: URL): boolean {\n  return url.search !== \"\" && url.search.startsWith(\"?/\");\n}\n\n/**\n * Converts a query string back into a complete URL. Used in combination with `convertUrlToQueryStringPath()`.\n * to redirect the browser for single-page apps when the server cannot be configured, e.g. GitHub pages.\n * Adapted from https://github.com/rafgraph/spa-github-pages.\n *\n * @param url - The URL with a path converted to a query string, and the original query string escaped.\n * @returns The original URL, with path instead of a query string.\n */\nexport function convertQueryStringPathToUrl(url: URL): URL {\n  if (!url.search || !url.search.startsWith(\"?/\")) {\n    return url;\n  }\n\n  const newPathAndQueryString = url.search\n    .slice(2) // Remove first ? character and slash\n    .split(\"&\") // Split the original path [idx 0] and query string [idx 1]\n    .map((s) => s.replace(new RegExp(ESCAPED_AMPERSAND, \"g\"), \"&\")) // Restore escaped ampersands\n    .join(\"?\"); // Rejoin the path and query string\n\n  return new URL(`${url.origin}${url.pathname}${newPathAndQueryString}${url.hash}`);\n}\n","import { convertUrlToQueryStringPath } from \"../../website/utils/gh_route_utils\";\n\n// Hide the default 404 page content and just show a blank screen.\n// The content should only be shown if the browser doesn't support JavaScript.\nwindow.onload = () => {\n  document.body.innerHTML = \"\";\n};\n\n// This script is used in the 404.html page to redirect the browser to the correct URL.\n// Convert the current URL to a query string path and redirect the browser.\nconst location = window.location;\nconst locationUrl = new URL(location.toString());\nconst newUrl = convertUrlToQueryStringPath(locationUrl, 1);\nlocation.replace(newUrl);\nconsole.log(\"Redirecting to \" + newUrl.toString());\n"],"names":["ESCAPED_AMPERSAND","window","onload","document","body","innerHTML","location","newUrl","url","basePathSegments","arguments","length","undefined","pathSegments","pathname","split","basePath","slice","join","queryPath","replace","queryString","search","concat","origin","hash","URL","convertUrlToQueryStringPath","toString","console","log"],"sourceRoot":""}