(()=>{var e,r,t={8625:()=>{},6504:()=>{},6580:()=>{},6082:(e,r,t)=>{"use strict";var n=t(4276),a=t(205);Error;const o=[{property:"name",enumerable:!1},{property:"message",enumerable:!1},{property:"stack",enumerable:!1},{property:"code",enumerable:!0},{property:"cause",enumerable:!1}],i=new WeakSet,s=({from:e,seen:r,to:t,forceEnumerable:n,maxDepth:l,depth:f,useToJSON:c,serialize:p})=>{var y;if(t||(t=Array.isArray(e)?[]:!p&&u(e)?new(y=e.name,a.A.get(y)??Error):{}),r.push(e),f>=l)return t;if(c&&"function"==typeof e.toJSON&&!i.has(e))return(e=>{i.add(e);const r=e.toJSON();return i.delete(e),r})(e);const d=e=>s({from:e,seen:[...r],forceEnumerable:n,maxDepth:l,depth:f,useToJSON:c,serialize:p});for(const[n,a]of Object.entries(e))if(a&&a instanceof Uint8Array&&"Buffer"===a.constructor.name)t[n]="[object Buffer]";else if(null===a||"object"!=typeof a||"function"!=typeof a.pipe){if("function"!=typeof a)if(a&&"object"==typeof a)r.includes(e[n])?t[n]="[Circular]":(f++,t[n]=d(e[n]));else try{t[n]=a}catch{}}else t[n]="[object Stream]";for(const{property:r,enumerable:a}of o)void 0!==e[r]&&null!==e[r]&&Object.defineProperty(t,r,{value:u(e[r])?d(e[r]):e[r],enumerable:!!n||a,configurable:!0,writable:!0});return t};function l(e,r={}){const{maxDepth:t=Number.POSITIVE_INFINITY,useToJSON:n=!0}=r;return"object"==typeof e&&null!==e?s({from:e,seen:[],forceEnumerable:!0,maxDepth:t,depth:0,useToJSON:n,serialize:!0}):"function"==typeof e?`[Function: ${e.name||"anonymous"}]`:e}function u(e){return Boolean(e)&&"object"==typeof e&&"name"in e&&"message"in e&&"stack"in e}var f=t(9698);let c=function(e){return e.UNKNOWN="unknown",e.NOT_FOUND="not_found",e.TOO_LARGE="too_large",e.LOAD_DATA_FAILED="load_data_failed",e.INVALID_METADATA="invalid_metadata",e.INVALID_MULTI_SOURCE_ZARR="invalid_multi_source_zarr",e}({});class p extends Error{constructor(e,r){super(e,r),this.name="VolumeLoadError",this.type=r?.type??c.UNKNOWN}}a.A.set("NodeNotFoundError",f._),a.A.set("KeyError",f.e),a.A.set("VolumeLoadError",p),self.onmessage=async e=>{try{const r=await async function(e){const r=e.data.channel,t=e.data.tilesizex,a=e.data.tilesizey,o=e.data.sizez,i=e.data.sizec,s=e.data.dimensionOrder,l=e.data.bytesPerSample,u=await(0,n.uz)(e.data.url,{allowFullFile:!0});let f=0,y=1;"XYZCT"===s?(f=o*r,y=1):"XYCZT"===s&&(f=r,y=i);const d=await u.getImage(f),m=d.getSampleFormat(),b=d.getBytesPerPixel(),A=new ArrayBuffer(t*a*o*b),E=new Uint8Array(A);for(let e=f,r=0;r<o;e+=y,++r){const n=await u.getImage(e),o=await n.readRasters({width:t,height:a}),i=Array.isArray(o)?o[0]:o,s=r*t*a;if(i.BYTES_PER_ELEMENT>4)throw new p("byte size not supported yet: "+i.BYTES_PER_ELEMENT,{type:c.INVALID_METADATA});if(i.BYTES_PER_ELEMENT!==l)throw new p("tiff bytes per element mismatch with OME metadata",{type:c.INVALID_METADATA});E.set(new Uint8Array(i.buffer),s*i.BYTES_PER_ELEMENT)}const w=function(e,r,t){if(3===t){if(4===r)return new Float32Array(e)}else if(2===t){if(1===r)return new Int8Array(e);if(2===r)return new Int16Array(e);if(4===r)return new Int32Array(e)}else if(1===t){if(1===r)return new Uint8Array(e);if(2===r)return new Uint16Array(e);if(4===r)return new Uint32Array(e)}return console.error(`TIFF Worker: unsupported sample format ${t} and bytes per pixel ${r}`),new Uint8Array(e)}(A,b,m);let _=w[0],h=w[0];for(let e=0;e<w.length;++e){const r=w[e];r<_&&(_=r),r>h&&(h=r)}const O=new Uint8Array(w.length);for(let e=0;e<w.length;++e)O[e]=(w[e]-_)/(h-_)*255;return{data:O,channel:r,range:[_,h],isError:!1}}(e);self.postMessage(r,[r.data.buffer])}catch(e){self.postMessage({isError:!0,error:l(e)})}}}},n={};function a(e){var r=n[e];if(void 0!==r)return r.exports;var o=n[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,a.x=()=>{var e=a.O(void 0,[961],(()=>a(6082)));return a.O(e)},e=[],a.O=(r,t,n,o)=>{if(!t){var i=1/0;for(f=0;f<e.length;f++){for(var[t,n,o]=e[f],s=!0,l=0;l<t.length;l++)(!1&o||i>=o)&&Object.keys(a.O).every((e=>a.O[e](t[l])))?t.splice(l--,1):(s=!1,o<i&&(i=o));if(s){e.splice(f--,1);var u=n();void 0!==u&&(r=u)}}return r}o=o||0;for(var f=e.length;f>0&&e[f-1][2]>o;f--)e[f]=e[f-1];e[f]=[t,n,o]},a.d=(e,r)=>{for(var t in r)a.o(r,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce(((r,t)=>(a.f[t](e,r),r)),[])),a.u=e=>e+".bundle.js",a.miniCssF=e=>{},a.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.p="/website-3d-cell-viewer/pr-preview/pr-324/",(()=>{var e={668:1,283:1};a.f.i=(r,t)=>{e[r]||importScripts(a.p+a.u(r))};var r=self.webpackChunk_aics_web_3d_viewer=self.webpackChunk_aics_web_3d_viewer||[],t=r.push.bind(r);r.push=r=>{var[n,o,i]=r;for(var s in o)a.o(o,s)&&(a.m[s]=o[s]);for(i&&i(a);n.length;)e[n.pop()]=1;t(r)}})(),r=a.x,a.x=()=>a.e(961).then(r),a.x()})();
//# sourceMappingURL=668.bundle.js.map